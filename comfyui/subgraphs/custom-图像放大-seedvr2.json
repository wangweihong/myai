{"revision":0,"last_node_id":68,"last_link_id":0,"nodes":[{"id":68,"type":"de59b869-8a3d-4f8b-8b6a-d8378ef83082","pos":[289.8668642461107,896.7554272611574],"size":[210,126],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"resolution","name":"resolution","type":"INT","widget":{"name":"resolution"},"link":null},{"localized_name":"max_resolution","name":"max_resolution","type":"INT","widget":{"name":"max_resolution"},"link":null},{"label":"image","localized_name":"图像","name":"image","type":"IMAGE","link":null},{"label":"mask","localized_name":"遮罩","name":"mask","type":"MASK","link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[]}],"title":"custom-图像放大-seedvr2","properties":{"proxyWidgets":[["-1","seed"],["-1","resolution"],["-1","max_resolution"]],"ue_properties":{"widget_ue_connectable":{"seed":true,"resolution":true,"max_resolution":true},"input_ue_unconnectable":{}},"cnr_id":"comfy-core","ver":"0.7.0"},"widgets_values":[42,4096,4096]}],"links":[],"version":0.4,"definitions":{"subgraphs":[{"id":"de59b869-8a3d-4f8b-8b6a-d8378ef83082","version":1,"state":{"lastGroupId":3,"lastNodeId":62,"lastLinkId":78,"lastRerouteId":1},"revision":0,"config":{},"name":"custom-图像放大-seedvr2","inputNode":{"id":-10,"bounding":[-618.5345324539601,473.77472158797025,125.640625,140]},"outputNode":{"id":-20,"bounding":[934.3692782051533,513.7747215879702,120,60]},"inputs":[{"id":"ff4a3c1a-3f1e-4c97-956e-c91e9980fefc","name":"seed","type":"INT","linkIds":[64],"localized_name":"seed","pos":[-512.8939074539601,493.77472158797025]},{"id":"ac324d56-7434-4081-bae4-b1e3bea080eb","name":"resolution","type":"INT","linkIds":[65],"localized_name":"resolution","pos":[-512.8939074539601,513.7747215879702]},{"id":"6210462a-57f8-4c2a-af69-7298362e96bd","name":"max_resolution","type":"INT","linkIds":[66],"localized_name":"max_resolution","pos":[-512.8939074539601,533.7747215879702]},{"id":"c51a7c47-ad41-4d61-bddb-91889251573d","name":"image","type":"IMAGE","linkIds":[67],"localized_name":"图像","label":"image","shape":7,"pos":[-512.8939074539601,553.7747215879702]},{"id":"deb17565-5e66-42ac-8efc-d597dff5d616","name":"mask","type":"MASK","linkIds":[78],"localized_name":"遮罩","label":"mask","shape":7,"pos":[-512.8939074539601,573.7747215879702]}],"outputs":[{"id":"af1e71a0-624e-4a29-ab87-8df0de4b0840","name":"IMAGE","type":"IMAGE","linkIds":[71,72],"localized_name":"图像","pos":[954.3692782051533,533.7747215879702]}],"widgets":[],"nodes":[{"id":52,"type":"MarkdownNote","pos":[561.9462057756249,233.9619186394318],"size":[258.02762213823553,118.11901727313062],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["* blocks_to_swap: 将模型块交换到内存防止爆显存。varm足够可以设置为0,速度能快3秒以上\n* max_resoultion： 当长边超过指定的值后会强制限制，设置为0则不限制\n\n"],"color":"#432","bgcolor":"#653"},{"id":53,"type":"SeedVR2VideoUpscaler","pos":[553.0339231875852,447.1833958407135],"size":[270,386],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":57},{"localized_name":"dit","name":"dit","type":"SEEDVR2_DIT","link":58},{"localized_name":"vae","name":"vae","type":"SEEDVR2_VAE","link":59},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":64},{"localized_name":"resolution","name":"resolution","type":"INT","widget":{"name":"resolution"},"link":65},{"localized_name":"max_resolution","name":"max_resolution","type":"INT","widget":{"name":"max_resolution"},"link":66},{"localized_name":"batch_size","name":"batch_size","type":"INT","widget":{"name":"batch_size"},"link":null},{"localized_name":"uniform_batch_size","name":"uniform_batch_size","type":"BOOLEAN","widget":{"name":"uniform_batch_size"},"link":null},{"localized_name":"color_correction","name":"color_correction","type":"COMBO","widget":{"name":"color_correction"},"link":null},{"localized_name":"temporal_overlap","name":"temporal_overlap","shape":7,"type":"INT","widget":{"name":"temporal_overlap"},"link":null},{"localized_name":"prepend_frames","name":"prepend_frames","shape":7,"type":"INT","widget":{"name":"prepend_frames"},"link":null},{"localized_name":"input_noise_scale","name":"input_noise_scale","shape":7,"type":"FLOAT","widget":{"name":"input_noise_scale"},"link":null},{"localized_name":"latent_noise_scale","name":"latent_noise_scale","shape":7,"type":"FLOAT","widget":{"name":"latent_noise_scale"},"link":null},{"localized_name":"offload_device","name":"offload_device","shape":7,"type":"COMBO","widget":{"name":"offload_device"},"link":null},{"localized_name":"enable_debug","name":"enable_debug","shape":7,"type":"BOOLEAN","widget":{"name":"enable_debug"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[71,72]}],"properties":{"ue_properties":{"widget_ue_connectable":{"seed":true,"resolution":true,"max_resolution":true,"batch_size":true,"uniform_batch_size":true,"color_correction":true,"temporal_overlap":true,"prepend_frames":true,"input_noise_scale":true,"latent_noise_scale":true,"offload_device":true,"enable_debug":true},"version":"7.5.2","input_ue_unconnectable":{}},"cnr_id":"seedvr2_videoupscaler","ver":"690cc39379c1481159ddd451368dbf2295930fc6","Node name for S&R":"SeedVR2VideoUpscaler","aux_id":"ainvfx/ComfyUI-SeedVR2_VideoUpscaler"},"widgets_values":[42,"randomize",4096,4096,1,false,"lab",0,0,0,0,"cpu",false]},{"id":54,"type":"SeedVR2LoadDiTModel","pos":[224.51800220530652,242.29533370274441],"size":[307.6646484375,202],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"torch_compile_args","name":"torch_compile_args","shape":7,"type":"TORCH_COMPILE_ARGS","link":60},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"blocks_to_swap","name":"blocks_to_swap","shape":7,"type":"INT","widget":{"name":"blocks_to_swap"},"link":null},{"localized_name":"swap_io_components","name":"swap_io_components","shape":7,"type":"BOOLEAN","widget":{"name":"swap_io_components"},"link":null},{"localized_name":"offload_device","name":"offload_device","shape":7,"type":"COMBO","widget":{"name":"offload_device"},"link":null},{"localized_name":"cache_model","name":"cache_model","shape":7,"type":"BOOLEAN","widget":{"name":"cache_model"},"link":null},{"localized_name":"attention_mode","name":"attention_mode","shape":7,"type":"COMBO","widget":{"name":"attention_mode"},"link":null}],"outputs":[{"localized_name":"SEEDVR2_DIT","name":"SEEDVR2_DIT","type":"SEEDVR2_DIT","links":[58]}],"properties":{"ue_properties":{"widget_ue_connectable":{"model":true,"device":true,"blocks_to_swap":true,"swap_io_components":true,"offload_device":true,"cache_model":true,"attention_mode":true},"version":"7.5.2","input_ue_unconnectable":{}},"cnr_id":"seedvr2_videoupscaler","ver":"690cc39379c1481159ddd451368dbf2295930fc6","Node name for S&R":"SeedVR2LoadDiTModel","aux_id":"ainvfx/ComfyUI-SeedVR2_VideoUpscaler"},"widgets_values":["seedvr2_ema_7b_fp8_e4m3fn_mixed_block35_fp16.safetensors","cuda:0",0,false,"cpu",false,"sdpa"]},{"id":55,"type":"SeedVR2LoadVAEModel","pos":[224.03164706558528,536.9393089288953],"size":[312.866796875,298],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"torch_compile_args","name":"torch_compile_args","shape":7,"type":"TORCH_COMPILE_ARGS","link":61},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"device","name":"device","type":"COMBO","widget":{"name":"device"},"link":null},{"localized_name":"encode_tiled","name":"encode_tiled","shape":7,"type":"BOOLEAN","widget":{"name":"encode_tiled"},"link":null},{"localized_name":"encode_tile_size","name":"encode_tile_size","shape":7,"type":"INT","widget":{"name":"encode_tile_size"},"link":null},{"localized_name":"encode_tile_overlap","name":"encode_tile_overlap","shape":7,"type":"INT","widget":{"name":"encode_tile_overlap"},"link":null},{"localized_name":"decode_tiled","name":"decode_tiled","shape":7,"type":"BOOLEAN","widget":{"name":"decode_tiled"},"link":null},{"localized_name":"decode_tile_size","name":"decode_tile_size","shape":7,"type":"INT","widget":{"name":"decode_tile_size"},"link":null},{"localized_name":"decode_tile_overlap","name":"decode_tile_overlap","shape":7,"type":"INT","widget":{"name":"decode_tile_overlap"},"link":null},{"localized_name":"tile_debug","name":"tile_debug","shape":7,"type":"COMBO","widget":{"name":"tile_debug"},"link":null},{"localized_name":"offload_device","name":"offload_device","shape":7,"type":"COMBO","widget":{"name":"offload_device"},"link":null},{"localized_name":"cache_model","name":"cache_model","shape":7,"type":"BOOLEAN","widget":{"name":"cache_model"},"link":null}],"outputs":[{"localized_name":"SEEDVR2_VAE","name":"SEEDVR2_VAE","type":"SEEDVR2_VAE","links":[59]}],"properties":{"ue_properties":{"widget_ue_connectable":{"model":true,"device":true,"encode_tiled":true,"encode_tile_size":true,"encode_tile_overlap":true,"decode_tiled":true,"decode_tile_size":true,"decode_tile_overlap":true,"tile_debug":true,"offload_device":true,"cache_model":true},"version":"7.5.2","input_ue_unconnectable":{}},"cnr_id":"seedvr2_videoupscaler","ver":"690cc39379c1481159ddd451368dbf2295930fc6","Node name for S&R":"SeedVR2LoadVAEModel","aux_id":"ainvfx/ComfyUI-SeedVR2_VideoUpscaler"},"widgets_values":["ema_vae_fp16.safetensors","cuda:0",true,512,128,true,512,128,"false","cpu",false]},{"id":56,"type":"Note","pos":[-5.220920805305852,240.5897313568482],"size":[210,88],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["Enable to upscale alpha/mask channel along with RGB channel (for RGBA inputs)"],"color":"#432","bgcolor":"#653"},{"id":58,"type":"SeedVR2TorchCompileSettings","pos":[-401.82541125126517,736.4670816496943],"size":[307.671484375,178],"flags":{},"order":2,"mode":4,"inputs":[{"localized_name":"backend","name":"backend","type":"COMBO","widget":{"name":"backend"},"link":null},{"localized_name":"mode","name":"mode","type":"COMBO","widget":{"name":"mode"},"link":null},{"localized_name":"fullgraph","name":"fullgraph","type":"BOOLEAN","widget":{"name":"fullgraph"},"link":null},{"localized_name":"dynamic","name":"dynamic","type":"BOOLEAN","widget":{"name":"dynamic"},"link":null},{"localized_name":"dynamo_cache_size_limit","name":"dynamo_cache_size_limit","type":"INT","widget":{"name":"dynamo_cache_size_limit"},"link":null},{"localized_name":"dynamo_recompile_limit","name":"dynamo_recompile_limit","type":"INT","widget":{"name":"dynamo_recompile_limit"},"link":null}],"outputs":[{"localized_name":"TORCH_COMPILE_ARGS","name":"TORCH_COMPILE_ARGS","type":"TORCH_COMPILE_ARGS","links":[60,61]}],"properties":{"ue_properties":{"widget_ue_connectable":{"backend":true,"mode":true,"fullgraph":true,"dynamic":true,"dynamo_cache_size_limit":true,"dynamo_recompile_limit":true},"version":"7.5.2","input_ue_unconnectable":{}},"cnr_id":"seedvr2_videoupscaler","ver":"690cc39379c1481159ddd451368dbf2295930fc6","Node name for S&R":"SeedVR2TorchCompileSettings","aux_id":"ainvfx/ComfyUI-SeedVR2_VideoUpscaler"},"widgets_values":["inductor","default",false,false,64,128]},{"id":59,"type":"Note","pos":[-81.13951226470613,803.5919753827847],"size":[290.1922351462714,97.95592567265356],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["Enable torch.compile optimization. First batch has compilation overhead, but speeds up subsequent batches. Best for long videos, not single images."],"color":"#432","bgcolor":"#653"},{"id":51,"type":"Note","pos":[-398.033607316121,224.4552492332925],"size":[210,94.05179298404067],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}}},"widgets_values":["特别小的图先放大1024,再基于1024图放大。\n大图本身就模糊的，缩放到1024再放大"],"color":"#432","bgcolor":"#653"},{"id":57,"type":"JoinImageWithAlpha","pos":[-20.359173424198545,515.1572158049786],"size":[176.86484375,46],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"IMAGE","link":62},{"localized_name":"阿尔法","name":"alpha","type":"MASK","link":78}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[57]}],"properties":{"ue_properties":{"widget_ue_connectable":{},"version":"7.5.2","input_ue_unconnectable":{}},"cnr_id":"comfy-core","ver":"0.3.68","Node name for S&R":"JoinImageWithAlpha"}},{"id":60,"type":"LayerUtility: ImageScaleByAspectRatio V2","pos":[-395.673855216142,365.7695797549171],"size":[303.6851501464844,330],"flags":{},"order":9,"mode":0,"inputs":[{"label":"image","localized_name":"图像","name":"image","shape":7,"type":"IMAGE","link":67},{"label":"mask","localized_name":"遮罩","name":"mask","shape":7,"type":"MASK","link":null},{"label":"aspect_ratio","localized_name":"宽高比","name":"aspect_ratio","type":"COMBO","widget":{"name":"aspect_ratio"},"link":null},{"label":"proportional_width","localized_name":"比例宽度","name":"proportional_width","type":"INT","widget":{"name":"proportional_width"},"link":null},{"label":"proportional_height","localized_name":"比例高度","name":"proportional_height","type":"INT","widget":{"name":"proportional_height"},"link":null},{"label":"fit","localized_name":"适应","name":"fit","type":"COMBO","widget":{"name":"fit"},"link":null},{"label":"method","localized_name":"方法","name":"method","type":"COMBO","widget":{"name":"method"},"link":null},{"label":"round_to_multiple","localized_name":"四舍五入到倍数","name":"round_to_multiple","type":"COMBO","widget":{"name":"round_to_multiple"},"link":null},{"label":"scale_to_side","localized_name":"缩放至边","name":"scale_to_side","type":"COMBO","widget":{"name":"scale_to_side"},"link":null},{"label":"scale_to_length","localized_name":"缩放至长度","name":"scale_to_length","type":"INT","widget":{"name":"scale_to_length"},"link":null},{"label":"background_color","localized_name":"背景颜色","name":"background_color","type":"STRING","widget":{"name":"background_color"},"link":null}],"outputs":[{"label":"image","localized_name":"image","name":"image","type":"IMAGE","links":[62]},{"label":"mask","localized_name":"mask","name":"mask","type":"MASK","links":[]},{"label":"original_size","localized_name":"original_size","name":"original_size","type":"BOX","links":[]},{"label":"width","localized_name":"width","name":"width","type":"INT","links":[]},{"label":"height","localized_name":"height","name":"height","type":"INT","links":[]}],"properties":{"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"},"cnr_id":"comfyui_layerstyle","ver":"90f4bfb38aaf121292f429b20eff07c6c121697e","Node name for S&R":"LayerUtility: ImageScaleByAspectRatio V2","aux_id":"chflame163/ComfyUI_LayerStyle","widget_ue_connectable":{}},"widgets_values":["original",1,1,"crop","lanczos","8","shortest",1080,"#000000"],"color":"rgba(38, 73, 116, 0.7)"}],"groups":[{"id":1,"title":"seedvr2放大","bounding":[-432.89390745396014,156.32510511283223,1307.2631856591133,774.899232950276],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":57,"origin_id":57,"origin_slot":0,"target_id":53,"target_slot":0,"type":"IMAGE"},{"id":58,"origin_id":54,"origin_slot":0,"target_id":53,"target_slot":1,"type":"SEEDVR2_DIT"},{"id":59,"origin_id":55,"origin_slot":0,"target_id":53,"target_slot":2,"type":"SEEDVR2_VAE"},{"id":60,"origin_id":58,"origin_slot":0,"target_id":54,"target_slot":0,"type":"TORCH_COMPILE_ARGS"},{"id":61,"origin_id":58,"origin_slot":0,"target_id":55,"target_slot":0,"type":"TORCH_COMPILE_ARGS"},{"id":62,"origin_id":60,"origin_slot":0,"target_id":57,"target_slot":0,"type":"IMAGE"},{"id":64,"origin_id":-10,"origin_slot":0,"target_id":53,"target_slot":3,"type":"INT"},{"id":65,"origin_id":-10,"origin_slot":1,"target_id":53,"target_slot":4,"type":"INT"},{"id":66,"origin_id":-10,"origin_slot":2,"target_id":53,"target_slot":5,"type":"INT"},{"id":67,"origin_id":-10,"origin_slot":3,"target_id":60,"target_slot":0,"type":"IMAGE"},{"id":71,"origin_id":53,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":72,"origin_id":53,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":78,"origin_id":-10,"origin_slot":4,"target_id":57,"target_slot":1,"type":"MASK"}],"extra":{"workflowRendererVersion":"LG","ue_links":[]}}]}}
{"revision":0,"last_node_id":59,"last_link_id":0,"nodes":[{"id":59,"type":"1072df67-5330-4125-8fa7-1ebcf4ce355a","pos":[-1712.5330338407598,2030.8915836574179],"size":[608.7263174509035,647.594064879723],"flags":{},"order":17,"mode":0,"inputs":[{"label":"加载图片","name":"image","type":"IMAGE","link":null},{"name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":null},{"name":"temperature","type":"FLOAT","widget":{"name":"temperature"},"link":null},{"name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"name":"attention","type":"COMBO","widget":{"name":"attention"},"link":null},{"label":"提示词","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"label":"正向提示词","localized_name":"字符串","name":"STRING","type":"STRING","links":[]},{"label":"反向提示词","name":"STRING_1","type":"STRING","links":null}],"title":"custom-WD标签反推","properties":{"proxyWidgets":[["-1","model"],["-1","quantization"],["-1","keep_model_loaded"],["-1","temperature"],["-1","seed"],["-1","attention"],["-1","text"]],"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"},"cnr_id":"comfy-core","ver":"0.7.0"},"widgets_values":["Qwen3-VL-8B-Instruct","8bit",false,1,67,"eager","你是一个专业的图像标注助手，请严格遵循以下要求：\n\n任务：为图像生成详细的描述性标签\n输出格式：纯标签列表，以逗号分隔，无其他文本\n\n标签要求：\n1. 客观描述图像内容，不添加主观评价\n2. 包含：主体对象、场景、动作、风格、颜色、材质\n3. 标签按相关性排序，最重要的在前\n4. 每个标签使用简洁的英文名词\n5. 标签数量：15-30个\n\n例如输入图像，输出：\"1 girl, long hair, anime stye\",不要输出AI generated\n并在输出前加入\"masterpiece, best quality, ultra high res, hyper-detailed, anime realism, 8K, newest,\"\n输出字符串,\n"]}],"links":[],"version":0.4,"definitions":{"subgraphs":[{"id":"1072df67-5330-4125-8fa7-1ebcf4ce355a","version":1,"state":{"lastGroupId":1,"lastNodeId":87,"lastLinkId":118,"lastRerouteId":0},"revision":0,"config":{},"name":"custom-WD标签反推","inputNode":{"id":-10,"bounding":[-723.2686013790294,640.1309322429418,153.015625,200]},"outputNode":{"id":-20,"bounding":[266.8693859942594,563.6846512512064,120,80]},"inputs":[{"id":"4db24e6f-9ba3-43c7-a0f2-c973c9452f87","name":"image","type":"IMAGE","linkIds":[105],"label":"加载图片","pos":[-590.2529763790294,660.1309322429418]},{"id":"30964ba0-189a-4a04-8164-376294c32147","name":"model","type":"COMBO","linkIds":[106],"pos":[-590.2529763790294,680.1309322429418]},{"id":"47d9b959-3bdf-443b-855e-773d7e1c96c6","name":"quantization","type":"COMBO","linkIds":[107],"pos":[-590.2529763790294,700.1309322429418]},{"id":"ff218873-0d14-476e-acc8-83f300c2a75a","name":"keep_model_loaded","type":"BOOLEAN","linkIds":[109],"pos":[-590.2529763790294,720.1309322429418]},{"id":"1fa39448-90c0-464a-a328-9efde4e59d60","name":"temperature","type":"FLOAT","linkIds":[110],"pos":[-590.2529763790294,740.1309322429418]},{"id":"198c4eaf-68e7-4592-ba0b-2087c741a68e","name":"seed","type":"INT","linkIds":[111],"pos":[-590.2529763790294,760.1309322429418]},{"id":"14859e2c-90e5-44ba-948b-aae44a99fa06","name":"attention","type":"COMBO","linkIds":[112],"pos":[-590.2529763790294,780.1309322429418]},{"id":"83d8c98e-dc65-4801-9b2c-11d8e32112b4","name":"text","type":"STRING","linkIds":[113],"label":"提示词","pos":[-590.2529763790294,800.1309322429418]}],"outputs":[{"id":"7d4eef42-86ec-49e2-806b-8c8dc6957ad1","name":"STRING","type":"STRING","linkIds":[117],"localized_name":"字符串","label":"正向提示词","pos":[286.8693859942594,583.6846512512064]},{"id":"e26794b9-3228-4004-8fbb-4fe1ffc6894b","name":"STRING_1","type":"STRING","linkIds":[118],"label":"反向提示词","pos":[286.8693859942594,603.6846512512064]}],"widgets":[],"nodes":[{"id":83,"type":"Any To String (mtb)","pos":[-144.33522262112595,439.92033163764097],"size":[190.02780862603313,26],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"input","name":"input","type":"*","link":116}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[114]}],"properties":{"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{},"version":"7.5.2"},"cnr_id":"comfy-mtb","ver":"eabe43db79112d4e3674db343c5c184145e8396c","Node name for S&R":"Any To String (mtb)"}},{"id":84,"type":"String Replace (mtb)","pos":[-142.38493092529708,512.1527265691719],"size":[270,106],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","link":114},{"localized_name":"old","name":"old","type":"STRING","widget":{"name":"old"},"link":null},{"localized_name":"new","name":"new","type":"STRING","widget":{"name":"new"},"link":null},{"localized_name":"use_regex","name":"use_regex","type":"BOOLEAN","widget":{"name":"use_regex"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[115]}],"properties":{"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{}},"cnr_id":"comfy-mtb","ver":"eabe43db79112d4e3674db343c5c184145e8396c","Node name for S&R":"String Replace (mtb)"},"widgets_values":["['","",false]},{"id":85,"type":"String Replace (mtb)","pos":[-143.9019917476451,662.6605308516677],"size":[270,106],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","link":115},{"localized_name":"old","name":"old","type":"STRING","widget":{"name":"old"},"link":null},{"localized_name":"new","name":"new","type":"STRING","widget":{"name":"new"},"link":null},{"localized_name":"use_regex","name":"use_regex","type":"BOOLEAN","widget":{"name":"use_regex"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[117]}],"properties":{"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{}},"cnr_id":"comfy-mtb","ver":"eabe43db79112d4e3674db343c5c184145e8396c","Node name for S&R":"String Replace (mtb)"},"widgets_values":["']","",false]},{"id":86,"type":"Note","pos":[-140.0663885250942,845.3666301618238],"size":[309.04583020285486,111.22600915238036],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["1. 修复Qwen3-VL-Instruct返回为list的bug\n"],"color":"#c09430","bgcolor":"rgba(24,24,27,.9)"},{"id":78,"type":"Qwen3_VQA","pos":[-532.3427277988163,387.41940517359757],"size":[373.77191162109375,622.82470703125],"flags":{},"order":2,"mode":0,"inputs":[{"label":"source_path","localized_name":"source_path","name":"source_path","shape":7,"type":"PATH","link":null},{"label":"image","localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":105},{"label":"text","localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":113},{"label":"model","localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":106},{"label":"quantization","localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":107},{"label":"keep_model_loaded","localized_name":"keep_model_loaded","name":"keep_model_loaded","type":"BOOLEAN","widget":{"name":"keep_model_loaded"},"link":109},{"label":"temperature","localized_name":"temperature","name":"temperature","type":"FLOAT","widget":{"name":"temperature"},"link":110},{"label":"max_new_tokens","localized_name":"max_new_tokens","name":"max_new_tokens","type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"label":"min_pixels","localized_name":"min_pixels","name":"min_pixels","type":"INT","widget":{"name":"min_pixels"},"link":null},{"label":"max_pixels","localized_name":"max_pixels","name":"max_pixels","type":"INT","widget":{"name":"max_pixels"},"link":null},{"label":"seed","localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":111},{"label":"attention","localized_name":"attention","name":"attention","type":"COMBO","widget":{"name":"attention"},"link":112}],"outputs":[{"label":"STRING","localized_name":"字符串","name":"STRING","type":"STRING","slot_index":0,"links":[116]}],"properties":{"ue_properties":{"version":"7.5.1","widget_ue_connectable":{},"input_ue_unconnectable":{}},"aux_id":"IuvenisSapiens/ComfyUI_Qwen3-VL-Instruct","ver":"70cc35edacfd5979cbe7a15caf56bd2f715bc3b5","Node name for S&R":"Qwen3_VQA"},"widgets_values":["你是一个专业的图像标注助手，请严格遵循以下要求：\n\n任务：为图像生成详细的描述性标签\n输出格式：纯标签列表，以逗号分隔，无其他文本\n\n标签要求：\n1. 客观描述图像内容，不添加主观评价\n2. 包含：主体对象、场景、动作、风格、颜色、材质\n3. 标签按相关性排序，最重要的在前\n4. 每个标签使用简洁的英文名词\n5. 标签数量：15-30个\n\n例如输入图像，输出：\"1 girl, long hair, anime stye\",不要输出AI generated\n并在输出前加入\"masterpiece, best quality, ultra high res, hyper-detailed, anime realism, 8K, newest,\"\n输出字符串,\n","Qwen3-VL-8B-Instruct","8bit",false,1,2048,125440,334768,67,"fixed","eager"]},{"id":87,"type":"Text Multiline","pos":[-517.7809442248417,1066.3991573116089],"size":[400,200],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","widget":{"name":"text"},"link":null}],"outputs":[{"localized_name":"字符串","name":"STRING","type":"STRING","links":[118]}],"properties":{"ue_properties":{"widget_ue_connectable":{},"input_ue_unconnectable":{}},"cnr_id":"was-ns","ver":"afeee09ba44e713ec52a413ac6b105fd06b2d356","Node name for S&R":"Text Multiline"},"widgets_values":["low quality,worst quality,normal quality,signature,jpeg artifacts,bad anatomy,old,early,copyright name,watermark,artist name,signature,bad anatomy, bad hands, bad fingers,extra fingers,body horror, censor, child, loli, symbol-shaped pupils, multiple colors hair,lips,bad quality,worst quality,worst detail,sketch,censor,nsfw，bad hands,lowres, worst quality, bad quality, bad anatomy, simple background, blurry, lowres, cropped, extra limbs, bad anatomy, deformed hands, bad face, sketch, jpeg artifacts, signature, watermark, old, oldest, Mosaic"]}],"groups":[{"id":1,"title":"custom-反推","bounding":[-543.2686013790294,316.9185787273167,918.2877807617188,1025.42470703125],"color":"#3f789e","font_size":24,"flags":{}}],"links":[{"id":105,"origin_id":-10,"origin_slot":0,"target_id":78,"target_slot":1,"type":"IMAGE"},{"id":106,"origin_id":-10,"origin_slot":1,"target_id":78,"target_slot":3,"type":"COMBO"},{"id":107,"origin_id":-10,"origin_slot":2,"target_id":78,"target_slot":4,"type":"COMBO"},{"id":109,"origin_id":-10,"origin_slot":3,"target_id":78,"target_slot":5,"type":"BOOLEAN"},{"id":110,"origin_id":-10,"origin_slot":4,"target_id":78,"target_slot":6,"type":"FLOAT"},{"id":111,"origin_id":-10,"origin_slot":5,"target_id":78,"target_slot":10,"type":"INT"},{"id":112,"origin_id":-10,"origin_slot":6,"target_id":78,"target_slot":11,"type":"COMBO"},{"id":113,"origin_id":-10,"origin_slot":7,"target_id":78,"target_slot":2,"type":"STRING"},{"id":114,"origin_id":83,"origin_slot":0,"target_id":84,"target_slot":0,"type":"STRING"},{"id":115,"origin_id":84,"origin_slot":0,"target_id":85,"target_slot":0,"type":"STRING"},{"id":116,"origin_id":78,"origin_slot":0,"target_id":83,"target_slot":0,"type":"STRING"},{"id":117,"origin_id":85,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"STRING"},{"id":118,"origin_id":87,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"STRING"}],"extra":{"workflowRendererVersion":"LG","ue_links":[],"links_added_by_ue":[]}}]}}